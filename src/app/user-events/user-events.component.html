<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css"
      integrity="sha512-iBBXm8fW90+nuLcSKlbmrPcLa0OT92xO1BIsZ+ywDWZCvqsWgccV3gFoRBv0z+8dLJgyAHIhR35VZc2oM/gI1w=="
      crossorigin="anonymous" referrerpolicy="no-referrer"/>
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet"
      integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css"
      integrity="sha512-iBBXm8fW90+nuLcSKlbmrPcLa0OT92xO1BIsZ+ywDWZCvqsWgccV3gFoRBv0z+8dLJgyAHIhR35VZc2oM/gI1w=="
      crossorigin="anonymous" referrerpolicy="no-referrer"/>
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet"
      integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">

<nav class="navbar navbar-expand-lg navbar-light bg-light">
  <div class="container-fluid">
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent"
            aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>
    <div class="collapse navbar-collapse" id="navbarSupportedContent">
      <ul class="navbar-nav mx-auto mb-2 mb-lg-0">
        <li class="nav-item">
          <!-- <a class="nav-link " aria-current="page" routerLink="/userblogs"><i class="fas fa-home"></i></a> -->
        </li>
        <li class="nav-item">
          <a class="nav-link active" href=""><i class="fas fa-bullhorn" routerLink="/user-events"></i></a>
        </li>
        <li class="nav-item">
          <a class="nav-link "><i class="fas fa-calendar-plus" routerLink="/user-history"></i></a>
        </li>
      </ul>
      <ul class="navbar-nav ms-auto mb-2 mb-lg-0 profile-menu">
        <li class="nav-item dropdown">
          <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button"
             data-bs-toggle="dropdown" aria-expanded="false">
            <div class="profile-pic">
              <img src="https://as1.ftcdn.net/v2/jpg/02/59/39/46/1000_F_259394679_GGA8JJAEkukYJL9XXFH2JoC3nMguBPNH.jpg"
                   alt="Profile Picture">
            </div>
          </a>
          <ul class="dropdown-menu" aria-labelledby="navbarDropdown">
            <li><a class="dropdown-item" [routerLink]="['/profil']"><i class="fas fa-cog fa-fw"></i>
              Settings</a></li>
            <li>
              <hr class="dropdown-divider">
            </li>
            <li><a class="dropdown-item" [routerLink]="['/login']"><i class="fas fa-sign-out-alt fa-fw"></i>
              Log Out</a></li>
          </ul>
        </li>
      </ul>
    </div>
  </div>
</nav>

<body>
<div class="events-box">
  <div class="filter-bar">
    <label for="type-filter">Filter by Type:</label>
    <select id="type-filter" [(ngModel)]="selectType" (change)="searchByKeyword()">
      <option value="">All</option>
      <option value="WALKING">WALKING</option>
      <option value="CYCLING">CYCLING</option>
      <option value="FITNESS">FITNESS</option>
      <option value="BEACH">BEACH</option>
      <option value="RUNNING">RUNNING</option>
      <option value="PETS">PETS</option>
    </select>
    <label for="search-bar">Search:</label>
    <input type="text" id="search-bar" [(ngModel)]="searchKeyword" (keyup)="searchByKeyword()" placeholder="Search...">
  </div>
<!--  <div class="event-card" *ngFor="let item of listEvents">-->
<!--    <div class="content">-->
<!--      <h2 class="title">{{ item.title }} </h2>-->
<!--      <p class="date">Date: {{ item.startDate | date: 'MMMM d, YYY' }}</p>-->
<!--      <p class="date">Longitude: {{ item.longitude }}</p>-->
<!--      <p class="date">Latitude: {{ item.latitude }}</p>-->
<!--      <p class="date">Max Participants: {{ item.maxParticipants }}</p>-->
<!--      <p class="type">Type: {{ item.description }}</p>-->
<!--      <p class="location">Ville: {{ item.description }}</p>-->
<!--      <p class="description">Description: {{ item.description }}</p>-->

<!--    </div>-->
<!--    &lt;!&ndash; Comments section &ndash;&gt;-->
<!--    <div class="comments-section">-->
<!--      <input type="text" placeholder="Add a comment..." class="comment-input" [(ngModel)]="commentText">-->
<!--      <button class="add-comment-btn" (click)="submitComment(item.idEvent)"><i class="fa fa-comment"-->
<!--                                                                               aria-hidden="true"></i>-->
<!--      </button>-->
<!--    </div>-->
<!--    &lt;!&ndash; Rating section &ndash;&gt;-->
<!--    <div class="rate">-->
<!--      <input type="radio" id="star5" name="rate" value="5" (click)="submitRating(item.idEvent,5)"/>-->
<!--      <label for="star5" title="5">5 stars</label>-->
<!--      <input type="radio" id="star4" name="rate" value="4" (click)="submitRating(item.idEvent,4)"/>-->
<!--      <label for="star4" title="4">4 stars</label>-->
<!--      <input type="radio" id="star3" name="rate" value="3" (click)="submitRating(item.idEvent,3)"/>-->
<!--      <label for="star3" title="3">3 stars</label>-->
<!--      <input type="radio" id="star2" name="rate" value="2" (click)="submitRating(item.idEvent,2)"/>-->
<!--      <label for="star2" title="2">2 stars</label>-->
<!--      <input type="radio" id="star1" name="rate" value="1" (click)="submitRating(item.idEvent,1)"/>-->
<!--      <label for="star1" title="1">1 star</label>-->
<!--    </div>-->
<!--    <button class="button" data-bs-toggle="modal"-->
<!--            data-bs-target="#addReservationModal"-->
<!--            (click)="selectedEventId=item.idEvent;this.form.get('event')?.setValue(this.selectedEventId);">Book Now-->
<!--    </button>-->
<!--  </div>-->

  <!-- More event cards here -->
</div>

<div class="container">
  <div class="row" >
    <div class="col-lg-4 col-md-4 col-sm-6 col-xs-12" *ngFor="let item of listEvents">
      <div class="tile" style="background: #ecf1f5 !important;">
        <div class="wrapper">
          <div class="header">{{ item.title }}</div>

          <div class="banner-img">
            <img [src]="'data:image/png;base64,'+item.image" alt="Image 1">
          </div>

          <div class="dates text-center m-0 p-0 pt-1">
<!--              <strong>{{item.user.name}}</strong>-->
            <strong>Agence</strong> {{item.user.name}}
          </div>

          <div class="dates">
            <div class="start">
              <strong>STARTS</strong> {{ item.startDate | date: 'MMMM d, YYY' }}
              <span></span>
            </div>
            <div class="ends">
              <strong>Ratings </strong> {{ item.ratingsList.length }}
            </div>
          </div>

          <div class="stats">

            <div>
              <strong>Max Parti.</strong> {{ item.maxParticipants }}
            </div>

            <div>
              <strong>Type</strong> {{ item.type }}
            </div>

            <div>
              <strong>Ville</strong> {{ item.ville }}
            </div>

          </div>

          <div class="stats">

            <div class="custom">
              <strong>Comments:</strong><br/>
              <ng-container *ngFor="let comment of item.commentsList">
                {{ comment.user.name }} : {{ comment.commentText }}
                <hr/>
              </ng-container>
            </div>

          </div>

          <!-- Comments section -->
          <div class="comments-section">
            <input type="text" placeholder="Add a comment..." class="comment-input" [(ngModel)]="commentText">
            <button class="add-comment-btn" (click)="submitComment(item.idEvent)"><i class="fa fa-comment"
                                                                                     aria-hidden="true"></i>
            </button>
          </div>

          <!-- Rating section -->
          <div class="rate" style="margin: 0px 10px">
            <input type="radio" id="star5" name="rate" value="5" (click)="submitRating(item.idEvent,5)"/>
            <label for="star5" title="5">5 stars</label>
            <input type="radio" id="star4" name="rate" value="4" (click)="submitRating(item.idEvent,4)"/>
            <label for="star4" title="4">4 stars</label>
            <input type="radio" id="star3" name="rate" value="3" (click)="submitRating(item.idEvent,3)"/>
            <label for="star3" title="3">3 stars</label>
            <input type="radio" id="star2" name="rate" value="2" (click)="submitRating(item.idEvent,2)"/>
            <label for="star2" title="2">2 stars</label>
            <input type="radio" id="star1" name="rate" value="1" (click)="submitRating(item.idEvent,1)"/>
            <label for="star1" title="1">1 star</label>
          </div>

          <div class="footer text-center">
            <a [routerLink]="['/login']" class="button btn-sm btn">Book Now</a>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
</body>

<div class="modal fade" id="addReservationModal" tabindex="-1" role="dialog"
     aria-labelledby="confirmationDeleteModalLabel"
     aria-hidden="true">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="confirmationDeleteModalLabel">Add Reservation</h5>
      </div>
      <div class="modal-body">
        <form [formGroup]="form" (ngSubmit)="onSubmitReservation()" class="form-style-1">
          <div class="row mb-3">
            <label for="name" class="col-sm-3 col-form-label">Full Name <span class="required">*</span></label>
            <div class="col-sm-9">
              <input type="text" id="name" formControlName="name" class="form-control"/>
            </div>
          </div>

          <div class="row mb-3">
            <label for="email" class="col-sm-3 col-form-label">Email <span class="required">*</span></label>
            <div class="col-sm-9">
              <input type="email" id="email" formControlName="email" class="form-control"/>
            </div>
          </div>

          <div class="row mb-3">
            <label for="numberOfParticipants" class="col-sm-3 col-form-label">Number of Participants <span
              class="required">*</span></label>
            <div class="col-sm-9">
              <input type="number" id="numberOfParticipants" formControlName="numberOfParticipants"
                     class="form-control"/>
            </div>
          </div>

          <div class="row mb-3">
            <label class="col-sm-3 col-form-label">Participants <span class="required">*</span></label>
            <div class="col-sm-9">
              <div class="input-group">
                <input type="number" formControlName="adults" class="form-control field-divided" placeholder="Adults"/>
                <input type="number" formControlName="childrens" class="form-control field-divided"
                       placeholder="Children"/>
              </div>
            </div>
          </div>

          <div class="row mb-3">
            <div class="col-sm-9 offset-sm-3">

            </div>
          </div>
        </form>
      </div>
      <div class="modal-footer">
        <form [formGroup]="form" (ngSubmit)="onSubmitReservation()">
          <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
          <!--        <button type="submit" class="btn btn-danger" data-bs-dismiss="modal">Delete</button>-->
          <button type="submit" class="btn btn-primary ms-1" data-bs-dismiss="modal" [disabled]="form.invalid">
            Réserver
          </button>
        </form>
      </div>
    </div>
  </div>
</div>

<script>
  const filter = document.getElementById('type-filter');
  const eventCards = document.querySelectorAll('.event-card');

  filter.addEventListener('change', function () {
    const filterValue = this.value;
    eventCards.forEach(card => {
      const cardType = card.getAttribute('data-type');
      if (filterValue === 'all' || cardType === filterValue) {
        card.style.display = 'block';
      } else {
        card.style.display = 'none';
      }
    });
  });
</script>


<script src='https://cdn.jsdelivr.net/npm/bootstrap@5.0.1/dist/js/bootstrap.bundle.min.js'></script>
